<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Tạo Hợp Đồng</title>
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/css/main.css" rel="stylesheet">
    <style>
        h6 {
            text-align: center;
            margin-bottom: 40px;
        }

        .form-label {
            font-weight: bold;
            color: #000;
        }

        .modal-dialog {
            margin: 0 auto;
            max-width: 1000px;
        }

        .modal-content {
            border: none;
        }

        .card {
            background-color: #fff;
            border: none;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        #timelineTable th:nth-child(1),
        #timelineTable td:nth-child(1) {
            width: 30%;
        }

        #timelineTable th:nth-child(2),
        #timelineTable td:nth-child(2) {
            width: 70%;
        }

        .location-form {
            display: none;
        }

        .location-form.active {
            display: block;
        }

        .date-input-group {
            position: relative;
        }

        .date-input-group input[type="text"] {
            padding-right: 40px;
        }

        .date-input-group .calendar-icon {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            cursor: pointer;
            z-index: 10;
        }

        .date-input-group input[type="date"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="modal fade" id="contractModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="false">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title fw-bold text-center w-100">TẠO HỢP ĐỒNG TỔ CHỨC SỰ KIỆN</h4>
                    <button type="button" class="btn-close" onclick="closeModal()" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="card m-4">
                        <h5 class="fw-bold text-center mt-3">THÔNG TIN HỢP ĐỒNG</h5>
                        <div class="row g-3 p-3">
                            <div class="col-12">
                                <label class="form-label">Tên hợp đồng <span class="text-danger">*</span></label>
                                <div class="row g-2">
                                    <div class="col-md-6">
                                        <select class="form-select" id="contractType" onchange="updateContractName()"
                                            required>
                                            <option value="">Chọn loại sự kiện</option>
                                            <option value="Hội nghị">Hội nghị</option>
                                            <option value="Đám cưới">Đám cưới</option>
                                            <option value="Sinh nhật">Sinh nhật</option>
                                            <option value="Khai trương">Khai trương</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="text" class="form-control" id="contractName" readonly required>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="customerName" class="form-label">Tên khách hàng <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="customerName"
                                    placeholder="Nhập tên khách hàng" required>
                            </div>
                            <div class="col-md-6">
                                <label for="phoneNumber" class="form-label">Số điện thoại <span
                                        class="text-danger">*</span></label>
                                <input type="tel" class="form-control" id="phoneNumber" placeholder="Nhập số điện thoại"
                                    required>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Thời gian tổ chức <span class="text-danger">*</span></label>
                                <div class="d-flex align-items-center gap-2">
                                    <div class="date-input-group w-100">
                                        <input type="text" class="form-control" id="startDateDisplay"
                                            placeholder="dd/mm/yyyy" required>
                                        <i class="bi bi-calendar calendar-icon"></i>
                                        <input type="date" id="startDate" min="2025-04-13">
                                    </div>
                                    <span>→</span>
                                    <div class="date-input-group w-100">
                                        <input type="text" class="form-control" id="endDateDisplay"
                                            placeholder="dd/mm/yyyy" required>
                                        <i class="bi bi-calendar calendar-icon"></i>
                                        <input type="date" id="endDate" min="2025-04-13">
                                    </div>
                                </div>
                                <div id="dateError" class="text-danger mt-1" style="display: none;"></div>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Địa chỉ <span class="text-danger">*</span></label>
                                <div class="row g-2">
                                    <div class="col-md-3">
                                        <select class="form-select" id="province" onchange="updateDistricts()" required>
                                            <option value="">Tỉnh/Thành</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="district" onchange="updateWards()" required>
                                            <option value="">Quận/Huyện</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="ward" required>
                                            <option value="">Xã/Phường</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="text" class="form-control" id="addressDetail"
                                            placeholder="Số nhà, tên đường" required>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="contractDate" class="form-label">Ngày tạo hợp đồng</label>
                                <input type="date" class="form-control" id="contractDate" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="card m-4 p-3">
                        <h5 class="fw-bold text-center mb-4">THIẾT BỊ</h5>
                        <div class="mb-3">
                            <select class="form-select" id="deviceSelect" onchange="addDevice()">
                                <option value="">Chọn thiết bị</option>
                            </select>
                        </div>
                        <table class="table table-bordered" id="deviceTable">
                            <thead>
                                <tr>
                                    <th>Hình ảnh</th>
                                    <th>Tên</th>
                                    <th>Mô tả</th>
                                    <th>Nhà cung cấp</th>
                                    <th>Số lượng</th>
                                    <th>Đơn giá</th>
                                    <th>Thành tiền</th>
                                    <th>Hành động</th>
                                </tr>
                            </thead>
                            <tbody id="deviceTableBody"></tbody>
                        </table>
                    </div>

                    <div class="card m-4 p-3">
                        <h5 class="fw-bold text-center mb-4">DỊCH VỤ</h5>
                        <div class="mb-3">
                            <select class="form-select" id="serviceSelect" onchange="addService()">
                                <option value="">Chọn dịch vụ</option>
                            </select>
                        </div>
                        <table class="table table-bordered" id="serviceTable">
                            <thead>
                                <tr>
                                    <th>Hình ảnh</th>
                                    <th>Tên</th>
                                    <th>Mô tả</th>
                                    <th>Nhà cung cấp</th>
                                    <th>Số lượng</th>
                                    <th>Đơn giá</th>
                                    <th>Thành tiền</th>
                                    <th>Hành động</th>
                                </tr>
                            </thead>
                            <tbody id="serviceTableBody"></tbody>
                        </table>
                    </div>

                    <div class="card m-4 p-3">
                        <h5 class="fw-bold text-center mb-4">ĐỊA ĐIỂM</h5>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="locationOption" id="providerLocation"
                                    value="provider" checked onchange="toggleLocationForm()">
                                <label class="form-check-label" for="providerLocation">Sử dụng địa điểm tổ chức do chúng
                                    tôi cung cấp</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="locationOption" id="customerLocation"
                                    value="customer" onchange="toggleLocationForm()">
                                <label class="form-check-label" for="customerLocation">Sử dụng địa điểm tổ chức của
                                    bạn</label>
                            </div>
                        </div>
                        <div class="location-form" id="providerLocationForm">
                            <div class="mb-3">
                                <select class="form-select" id="locationSelect" onchange="addLocation()">
                                    <option value="">Chọn địa điểm</option>
                                </select>
                            </div>
                            <table class="table table-bordered" id="locationTable">
                                <thead>
                                    <tr>
                                        <th>Hình ảnh</th>
                                        <th>Tên địa điểm</th>
                                        <th>Nhà cung cấp</th>
                                        <th>Từ ngày</th>
                                        <th>Đến ngày</th>
                                        <th>Số ngày thuê</th>
                                        <th>Đơn giá (VND/Ngày)</th>
                                        <th>Thành tiền (VND)</th>
                                        <th>Hành động</th>
                                    </tr>
                                </thead>
                                <tbody id="locationTableBody"></tbody>
                            </table>
                        </div>
                        <div class="location-form" id="customerLocationForm">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="customLocationName" class="form-label">Tên địa điểm <span
                                            class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="customLocationName"
                                        placeholder="Nhập tên địa điểm" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="customLocationAddress" class="form-label">Địa chỉ <span
                                            class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="customLocationAddress"
                                        placeholder="Nhập địa chỉ cụ thể" required>
                                </div>
                                <div class="col-md-12">
                                    <label class="form-label">Thời gian sử dụng <span
                                            class="text-danger">*</span></label>
                                    <div class="d-flex align-items-center gap-2">
                                        <div class="date-input-group w-100">
                                            <input type="text" class="form-control" id="customStartDateDisplay"
                                                placeholder="dd/mm/yyyy" required>
                                            <i class="bi bi-calendar calendar-icon"></i>
                                            <input type="date" id="customStartDate" min="2025-04-13">
                                        </div>
                                        <span>→</span>
                                        <div class="date-input-group w-100">
                                            <input type="text" class="form-control" id="customEndDateDisplay"
                                                placeholder="dd/mm/yyyy" required>
                                            <i class="bi bi-calendar calendar-icon"></i>
                                            <input type="date" id="customEndDate" min="2025-04-13">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card m-4 p-3">
                        <h5 class="fw-bold text-center mb-3">TIMELINE</h5>
                        <div class="mb-3 d-flex gap-2">
                            <div class="date-input-group w-50">
                                <input type="text" class="form-control" id="timelineDateDisplay"
                                    placeholder="dd/mm/yyyy">
                                <i class="bi bi-calendar calendar-icon"></i>
                                <input type="date" id="timelineDate">
                            </div>
                            <input type="time" class="form-control" id="timelineTime" placeholder="Giờ">
                            <input type="text" class="form-control" id="timelineDescription" placeholder="Mô tả">
                            <button type="button" class="btn btn-primary" onclick="addTimeline()">Thêm</button>
                        </div>
                        <table class="table table-bordered" id="timelineTable">
                            <thead>
                                <tr>
                                    <th>Thời gian bắt đầu</th>
                                    <th>Mô tả</th>
                                </tr>
                            </thead>
                            <tbody id="timelineTableBody"></tbody>
                        </table>
                    </div>
                    <div class="mt-4 text-end">
                        <h6 class="fw-bold">Tổng tiền: <span id="totalCost">0 VNĐ</span></h6>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Hủy</button>
                    <button type="button" class="btn btn-primary" onclick="saveContract()">Lưu hợp đồng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Vendor JS Files -->
    <script src="/fe-event-management/client/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/fe-event-management/client/assets/vendor/aos/aos.js"></script>
    <script src="/fe-event-management/client/assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="/fe-event-management/client/assets/vendor/purecounter/purecounter_vanilla.js"></script>

    <!-- Main JS File -->
    <script src="/fe-event-management/client/assets/js/contract.js"></script>


</body>

</html>